<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Exercício Lista Tarefas</h1>
    <main>
        <label for="adicionaTarefa">Adicionar tarefa:</label>
        <input type="text" id="txtTarefa">
        <input type="submit" value="Adicionar" id="addTarefa">

        <ul id="listaTarefa">
            <li>Lavar o carro</li>
            <li>Lavar a moto</li> 
            <li>Estudar</li>
        </ul>
        
    </main>

    <script>
        (function(){
            'use strict'

            var $tarefa = document.getElementById("txtTarefa");
            var $adiciona = document.getElementById("addTarefa");
            var $lista = document.getElementById("listaTarefa");
            var $lis = document.querySelectorAll("li");

            $adiciona.addEventListener("click", addTarefa);

            $tarefa.addEventListener("keyup", function(e){
                if(e.keyCode === 13){ // Evento do teclado verifica se digitou a tecla "ENTER"
                    addTarefa();
                }
            });

            $lista.addEventListener("click", function(e){
                if(e.target.nodeName === "LI"){
                    // toggleDone(e.target);

                    removeTarefa(e.target);
                }
            });

            function removeTarefa(li){
                if(confirm("Excluir a tarefa '" + li.textContent + "' ?")){
                    li.parentNode.removeChild(li);
                }
            };

/*             for(var i = 0; i < $lis.length; i++){
                addEvent($lis[i]);
            };
 */

/*             function toggleDone(li){
                li.classList.toggle("done");// -> evento de alternância
            };
 */
            function addTarefa(){
/*                 var tarefa = "<li>" + $tarefa.value + "</li>";
                $lista.innerHTML += tarefa;
 */               
                if($tarefa.value !== ""){
                var li = document.createElement("li");
                var txt = document.createTextNode($tarefa.value);

                li.appendChild(txt);
                $lista.appendChild(li);

                // addEvent(li);

                limpar();     
                }else{
                    alert("[ Campo vazio ]")
                }
            };

/*             function addEvent(li){
                li.addEventListener("click", toggleDone);
            }
 */
            function limpar(){
                $tarefa.value = "";
                $tarefa.focus(); // -> Foco no input depois de add a tarefa
            };
            
        })()
    </script>
</body>
</html>