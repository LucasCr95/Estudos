<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Propriedades Visuais</h1>
    <nav id="menu">
        <ul>
            <li><a href="#s1">Seção Um</a></li>
            <li><a href="#s2">Seção Dois</a></li>
            <li><a href="#s3">Seção Três</a></li>
        </ul>
    </nav>
    <main>
      <h2 id="s1">Seção Um</h2>
      <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Adipisci distinctio ad eum velit nihil voluptatum consequatur praesentium nesciunt, sint odio consequuntur vel nostrum rerum quos nobis mollitia aliquam quis enim.</p>
      <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Adipisci distinctio ad eum velit nihil voluptatum consequatur praesentium nesciunt, sint odio consequuntur vel nostrum rerum quos nobis mollitia aliquam quis enim.</p>
      <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Adipisci distinctio ad eum velit nihil voluptatum consequatur praesentium nesciunt, sint odio consequuntur vel nostrum rerum quos nobis mollitia aliquam quis enim.</p>
      <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Adipisci distinctio ad eum velit nihil voluptatum consequatur praesentium nesciunt, sint odio consequuntur vel nostrum rerum quos nobis mollitia aliquam quis enim.</p>
      <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Adipisci distinctio ad eum velit nihil voluptatum consequatur praesentium nesciunt, sint odio consequuntur vel nostrum rerum quos nobis mollitia aliquam quis enim.</p>
      <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Adipisci distinctio ad eum velit nihil voluptatum consequatur praesentium nesciunt, sint odio consequuntur vel nostrum rerum quos nobis mollitia aliquam quis enim.</p>
      <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Adipisci distinctio ad eum velit nihil voluptatum consequatur praesentium nesciunt, sint odio consequuntur vel nostrum rerum quos nobis mollitia aliquam quis enim.</p>
      <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Adipisci distinctio ad eum velit nihil voluptatum consequatur praesentium nesciunt, sint odio consequuntur vel nostrum rerum quos nobis mollitia aliquam quis enim.</p>
      <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Adipisci distinctio ad eum velit nihil voluptatum consequatur praesentium nesciunt, sint odio consequuntur vel nostrum rerum quos nobis mollitia aliquam quis enim.</p>
      <h2 id="s2">Seção Dois</h2>
      <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Eveniet recusandae doloremque id pariatur, quos veritatis rem nisi officiis ad cupiditate. Distinctio reiciendis facilis exercitationem error, dolore dolorum veritatis quo repudiandae.</p>
      <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Eveniet recusandae doloremque id pariatur, quos veritatis rem nisi officiis ad cupiditate. Distinctio reiciendis facilis exercitationem error, dolore dolorum veritatis quo repudiandae.</p>
      <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Eveniet recusandae doloremque id pariatur, quos veritatis rem nisi officiis ad cupiditate. Distinctio reiciendis facilis exercitationem error, dolore dolorum veritatis quo repudiandae.</p>
      <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Eveniet recusandae doloremque id pariatur, quos veritatis rem nisi officiis ad cupiditate. Distinctio reiciendis facilis exercitationem error, dolore dolorum veritatis quo repudiandae.</p>
      <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Eveniet recusandae doloremque id pariatur, quos veritatis rem nisi officiis ad cupiditate. Distinctio reiciendis facilis exercitationem error, dolore dolorum veritatis quo repudiandae.</p>
      <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Eveniet recusandae doloremque id pariatur, quos veritatis rem nisi officiis ad cupiditate. Distinctio reiciendis facilis exercitationem error, dolore dolorum veritatis quo repudiandae.</p>
      <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Eveniet recusandae doloremque id pariatur, quos veritatis rem nisi officiis ad cupiditate. Distinctio reiciendis facilis exercitationem error, dolore dolorum veritatis quo repudiandae.</p>
      <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Eveniet recusandae doloremque id pariatur, quos veritatis rem nisi officiis ad cupiditate. Distinctio reiciendis facilis exercitationem error, dolore dolorum veritatis quo repudiandae.</p>
      <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Eveniet recusandae doloremque id pariatur, quos veritatis rem nisi officiis ad cupiditate. Distinctio reiciendis facilis exercitationem error, dolore dolorum veritatis quo repudiandae.</p>
      <h2 id="s3">Seção Três</h2>
      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis in delectus, earum animi nisi reprehenderit nemo temporibus, aut saepe quisquam eveniet. Eligendi corporis quas soluta enim consequatur praesentium voluptate maxime?</p>
      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis in delectus, earum animi nisi reprehenderit nemo temporibus, aut saepe quisquam eveniet. Eligendi corporis quas soluta enim consequatur praesentium voluptate maxime?</p>
      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis in delectus, earum animi nisi reprehenderit nemo temporibus, aut saepe quisquam eveniet. Eligendi corporis quas soluta enim consequatur praesentium voluptate maxime?</p>
      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis in delectus, earum animi nisi reprehenderit nemo temporibus, aut saepe quisquam eveniet. Eligendi corporis quas soluta enim consequatur praesentium voluptate maxime?</p>
      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis in delectus, earum animi nisi reprehenderit nemo temporibus, aut saepe quisquam eveniet. Eligendi corporis quas soluta enim consequatur praesentium voluptate maxime?</p>
      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis in delectus, earum animi nisi reprehenderit nemo temporibus, aut saepe quisquam eveniet. Eligendi corporis quas soluta enim consequatur praesentium voluptate maxime?</p>
      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis in delectus, earum animi nisi reprehenderit nemo temporibus, aut saepe quisquam eveniet. Eligendi corporis quas soluta enim consequatur praesentium voluptate maxime?</p>
      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis in delectus, earum animi nisi reprehenderit nemo temporibus, aut saepe quisquam eveniet. Eligendi corporis quas soluta enim consequatur praesentium voluptate maxime?</p>
      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis in delectus, earum animi nisi reprehenderit nemo temporibus, aut saepe quisquam eveniet. Eligendi corporis quas soluta enim consequatur praesentium voluptate maxime?</p>
    </main>

    <script>
        (function(){
            window.addEventListener('scroll', destacaMenu);

            var $menu = document.querySelector('#menu');
            var $links = $menu.querySelectorAll('li a');

            function destacaMenu(){
                var positions = [];
                for(var i = 0; i < $links.length; i++){
                    positions[i] = getYPositionScroll($links[i]);
                }
                
                var currentLink = lastVisibleLink(positions);

                var linkActived = document.querySelector('.actived');
                if(linkActived) linkActived.classList.remove('actived');

                currentLink.classList.add('actived')
            }

            function getYPositionScroll(link){
/*  A função getBoundingRect().top retorna a posição do elemento na viewport
*/
                var targetLink = document.querySelector(link.getAttribute('href')).getBoundingClientRect().top;

                return targetLink;
            }

            function lastVisibleLink(positions){
                var qtd = positions.length;
                while(qtd){
                    qtd--;
                    if(positions[qtd] < 0){
                        return $links[qtd];
                    }
                }
                return $links[0];
            }

        })()
    </script>
</body>
</html>